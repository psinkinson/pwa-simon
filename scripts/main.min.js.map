{"version":3,"sources":["main.js"],"names":["flashItem","item","addClass","setTimeout","removeClass","setLevel","level","levelIdx","selectedLevel","levels","document","getElementById","innerHTML","start","cancelNextItem","selectedIdx","setVisibility","nextItem","id","visible","style","display","elem","cls","console","log","i","found","classes","className","split","length","remove","newClassName","tmr","window","cancelTimeout","clearItems","items","forEach","setItem","currentIdx","postNext","startWatching","watchInput","isLocalhost","Boolean","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","error","querySelectorAll","addEventListener","clickedItem","parseInt","expectedItem"],"mappings":"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","file":"main.min.js","sourcesContent":["/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n\n  // setup levels\n  var levels = [\n    [0, 1, 3, 2],\n    [0, 0, 1, 3, 1],\n    [0, 1, 3, 2, 3, 1, 3],\n    [1, 3, 3, 1, 4, 2],\n    [0, 3, 0, 1, 2, 1, 0]\n  ];\n  var levelIdx = 0;\n  var selectedLevel = [];\n\n  setLevel(0);\n\n  // setup buttons\n  var selectedIdx = -1;\n  var tmr = null;\n  var items = document.querySelectorAll('.board__button');\n  console.log('items', items.length);\n\n  //  wire up buttons\n  var watchInput = false;\n  items.forEach(function(item) {\n    item.addEventListener('click', function() {\n      if (watchInput) {\n        flashItem(item);\n        var clickedItem = parseInt(item.id.split('-')[1], 10);\n        console.log(clickedItem);\n        var expectedItem = selectedLevel[selectedIdx];\n        // check input\n        if (clickedItem === expectedItem) {\n          console.log('CORRECT');\n        } else {\n          console.log('INCORRECT pressed ' + clickedItem + ' expected ' + expectedItem);\n        }\n        selectedIdx++;\n        if (selectedIdx === selectedLevel.length) {\n          watchInput = false;\n          setLevel(levelIdx + 1);\n        }\n      }\n    });\n  });\n  document.getElementById('startGame')\n    .addEventListener('click', function() {\n      console.log('click start');\n      start();\n    });\n\n  // document.getElementById('stopGame')\n  //   .addEventListener('click', function() {\n  //     console.log('click stop');\n  //     stop();\n  //   });\n\n  function flashItem(item) {\n    addClass(item, 'flash');\n    setTimeout(function() {\n      removeClass(item, 'flash');\n    }, 150);\n  }\n\n  function setLevel(level) {\n    levelIdx = level;\n    selectedLevel = levels[levelIdx];\n    document.getElementById('level').innerHTML = levelIdx;\n  }\n\n  // game funcs\n  function start() {\n    cancelNextItem();\n    selectedIdx = -1;\n    setVisibility('instruction-watch', true);\n    nextItem();\n  }\n  function setVisibility(id, visible) {\n    document.getElementById(id).style.display = visible ? 'visible' : 'hidden';\n  }\n  // function stop() {\n  //   cancelNextItem();\n  // }\n\n  // level funcs\n  // function nextLevel() {\n  //   if (levelIdx < levels.length) {\n  //     levelIdx++;\n  //     selectedLevel = levels[levelIdx];\n  //   }\n  // }\n  function addClass(elem, cls) {\n    if (typeof elem === 'string') {\n      console.log('addClass elem === string', elem);\n      elem = document.getElementById(elem);\n    }\n    var i;\n    var found = false;\n    console.log('addClass elem', elem);\n    var classes = elem.className.split(' ');\n    console.log(classes);\n    for (i = 0; i < classes.length; i++) {\n      if (classes[i] === cls) {\n        found = true;\n      }\n    }\n    if (!found) {\n      elem.className += ' ' + cls;\n      console.log(elem.className);\n    }\n  }\n  function removeClass(elem, remove) {\n    if (typeof elem === 'string') {\n      elem = document.getElementById(elem);\n    }\n    var newClassName = '';\n    var i;\n    var classes = elem.className.split(' ');\n    for (i = 0; i < classes.length; i++) {\n      if (classes[i] !== remove) {\n        newClassName += classes[i] + ' ';\n      }\n    }\n    elem.className = newClassName;\n    console.log(elem.className);\n  }\n\n  // button funcs\n  function cancelNextItem() {\n    if (tmr) {\n      window.cancelTimeout(tmr);\n    }\n  }\n  function clearItems() {\n    items.forEach(function(item) {\n      removeClass(item, 'flash');\n    });\n  }\n  function setItem(selectedIdx) {\n    addClass(items[selectedIdx], 'flash');\n  }\n  // function setItems(selectdIdx) {\n  //   items.forEach(function(item, idx) {\n  //     if (idx === selectdIdx) {\n  //       addClass(item, 'flash');\n  //       // item.style.opacity = '1';\n  //     } else {\n  //       removeClass(item, 'flash');\n  //       // item.style.opacity = '0.5';\n  //     }\n  //   });\n  // }\n  function nextItem() {\n    tmr = null;\n    var currentIdx = -1;\n    selectedIdx++;\n    if (selectedIdx < selectedLevel.length) {\n      // not finished pattern yet\n      currentIdx = selectedLevel[selectedIdx];\n    }\n    // clear current\n    if (selectedIdx > 0) {\n      clearItems();\n    }\n    // set next\n\n    if (selectedIdx > 0 && currentIdx > -1) {\n      // was previous and next\n      // allow a pause before next flash\n      window.setTimeout(function() {\n        postNext(currentIdx);\n      }, 200);\n    } else {\n      // no previous flash so just set next\n      postNext(currentIdx);\n    }\n  }\n  function postNext(currentIdx) {\n    if (currentIdx > -1) {\n      setItem(currentIdx);\n      tmr = window.setTimeout(nextItem, 800);\n    } else {\n      startWatching();\n    }\n  }\n  function startWatching() {\n    selectedIdx = 0;\n    addClass('instruction-watch', 'hidden');\n    removeClass('instruction-copy', 'hidden');\n    watchInput = true;\n  }\n})();\n"]}